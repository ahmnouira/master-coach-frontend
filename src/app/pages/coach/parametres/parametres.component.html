<app-sub-header [title]="'Paramètres'"></app-sub-header>
<div class="row sub-component-content">
  <div class="col-3 p-0">
    <button class="active-tab" [routerLink]="['/pages/coach/parametre']">
      <span>Mon profil </span>
      <img src="assets/img/common/arrow-left.svg">
    </button>
    <button class="active-tab white-bg pl-0">
      <span>Mes plans </span>
      <img src="assets/img/common/arrow-left.svg">
    </button>
    <div class="smaller-font white-bg pl-0 cursor-pointer sub-menu"   [routerLink]="['/pages/coach/quiz/list']">
      <span>Formulaire de satisfaction</span>
      <img src="assets/img/common/arrow-left.svg" width="5px" height="6px">
    </div>
    <div class="white-bg pl-0 smaller-font cursor-pointer sub-menu">
      <span>Politique de confidentialité </span>
      <img src="assets/img/common/arrow-left.svg" width="5px" height="6px">
    </div>
    <div class="white-bg pl-0 smaller-font cursor-pointer">
      <span>Conditions générales </span>
      <img src="assets/img/common/arrow-left.svg" width="5px" height="6px">
    </div>
  </div>
  <div class="col-9">
    <div class="row">
      <div class="col-12 ms-lg-0 col-lg-3 col-separator p-lg-0 mb-3 mb-lg-0">
        <span class="row-title">Informations personnelles</span>
      </div>
      <div class="col-12 col-lg-9 pl-40">
        <div class="image-container">
          <img class="profil-image" [attr.src]="form.photo" (click)="file.click()">
          <input type="file" hidden accept="image/*" (change)="importFile($event)" #file>
          <button (click)="file.click()"> <img class="profil-icon" src="assets/img/common/camera-to-take-photos%20(3).svg"></button>

        </div>
        <div class="row profil-data mb-17 gx-4">
          <div class="col-md-6 form-group">
            <label class="element-label">Nom</label>
            <input type="text" [(ngModel)]="form.nom"
                   class="form-control element"
                   placeholder="Laroche"
            >
          </div>
          <div class="col-md-6 form-group">
            <label class="element-label">Prénom</label>
            <input type="text" [(ngModel)]="form.prenom"
              class="form-control element"
              placeholder="David"
            >
          </div>
        </div>
        <div class="row profil-data mb-17 gx-4">
          <div class="col-md-6 form-group">
            <label class="element-label">Email</label>
            <input type="email" [(ngModel)]="form.email"
                   class="form-control element"
                   placeholder="davidlaroche@gmail.com"
                   pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
                   required
                   #email="ngModel"
            >
            <div *ngIf="(email.invalid && email.touched) || email.dirty">
              <small *ngIf="email.errors?.required" class="alert alert-danger" role="alert">L'email' est obligatoire!</small>
              <small *ngIf="email.errors?.pattern" class="alert alert-danger" role="alert">Veuillez entrer un email valide</small>
            </div>
          </div>

          <div class="col-md-6 form-group">
            <label class="element-label">Numéro de téléphone</label>
            <input type="tel" [(ngModel)]="form.tel"
                   class="form-control element"
                   placeholder="+33 12 34 56 789"
                   pattern="^(0|\+33)[ ]?[1-9]([-.: ]?[0-9]{2}){4}$"
                   required
                   #tel="ngModel"
            >
            <div *ngIf="(tel.invalid && email.touched) || tel.dirty">
              <small *ngIf="tel.errors?.required" class="alert alert-danger" role="alert">Le numéro de telephone est est obligatoire!</small>
              <small *ngIf="tel.errors?.pattern" class="alert alert-danger" role="alert">Veuillez entrer un numéro de telephone valide</small>
            </div>
          </div>
        </div>
        <div class="row profil-data">
          <div class="form-group col-md-12">
            <label class="element-label">Biographie</label>
            <textarea rows="5" style="height: 120px" [(ngModel)]="form.bio"
                      class="form-control element"
                   placeholder="davidlaroche@gmail.com">
Praesent congue commodo sapien eget sodales. Vestibulum facilisis convallis massa, id porta turpis euismod a. Aliquam vitae orci semper, lacinia orci nec, tristique risus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Quisque fermentum purus leo, vestibulum laoreet tortor aliquam et. Vestibulum fringilla scelerisque faucibus. Nullam a elit eu nisl suscipit tempor sit amet eu erat. Morbi odio lorem.
</textarea>
          </div>
        </div>
      </div>
    </div>
    <div class="row mt-4">
      <div class="center-verticaly col-12 ms-lg-0 col-lg-3 col-separator p-lg-0 mb-3 mb-lg-0">
        <span class="row-title">Documents</span></div>
      <div class="col-lg-9 col-12 pl-40">
        <div class="row  profil-data mb-17 gx-4">
          <div *ngIf="!form.cinF" class="col-md-6 form-group">
            <label class="element-label">C.N.I</label>
            
            <div class="file-input">
              <input type="file" required
                   class="form-control  form-control-lg element"
                   style="display:none;"
                   id="cinF"
                   title=" "
                   name="cinF" accept="application/pdf" (change)="importCINFront($event)" />
                <label for="cinF">
                  <svg id="upload-arrow" data-name="upload-big-arrow (1)" xmlns="http://www.w3.org/2000/svg" width="13.409" height="12.026" viewBox="0 0 13.409 12.026">
                    <g id="Groupe_394" data-name="Groupe 394" transform="translate(3.045)">
                      <path id="Tracé_256" data-name="Tracé 256" d="M104.986,27.929h1.357v4.026a.739.739,0,0,0,.739.739H109.1a.739.739,0,0,0,.739-.739V27.929H111.2a.555.555,0,0,0,.392-.948l-3.1-3.105a.556.556,0,0,0-.785,0l-3.1,3.105a.555.555,0,0,0,.392.948Z" transform="translate(-104.431 -23.713)" fill="#1376a3"/>
                    </g>
                    <g id="Groupe_395" data-name="Groupe 395" transform="translate(0 5.724)">
                      <path id="Tracé_257" data-name="Tracé 257" d="M12.742,220.029a.667.667,0,0,0-.666.667v2.788A1.517,1.517,0,0,1,10.561,225H2.848a1.516,1.516,0,0,1-1.515-1.515V220.7A.667.667,0,1,0,0,220.7v2.788a2.851,2.851,0,0,0,2.848,2.848h7.713a2.851,2.851,0,0,0,2.848-2.848V220.7A.667.667,0,0,0,12.742,220.029Z" transform="translate(0 -220.029)" fill="#1376a3"/>
                    </g>
                  </svg>
                Choisir un fichier</label>
            </div>
          </div>

          <div  *ngIf="form.cinF" class="col-md-6 file-box">
            <label class="element-label" for="cinF">C.N.I</label>
            <div class="d-flex">
              <a class="mlr-10" [attr.href]="sanitizer.bypassSecurityTrustResourceUrl(form.cinF)" download="cin-{{form.nom}}-{{form.prenom}}.pdf" title="cin-{{form.nom}}-{{form.prenom}}.pdf">cin-{{form.nom}}-{{form.prenom}}.pdf</a>
              <img (click)="form.cinF=''" src="assets/img/common/trash-bin.svg" style="width: 15px"/>

            </div>
          </div>

          <div  *ngIf="!form.kbis" class="col-md-6 form-group">
            <label class="element-label">KBIS</label>
            <div class="file-input">
              <input type="file" required
              class="form-control  form-control-lg element"
              id="kbis"
              style="display:none;"
              name="kbis" accept="application/pdf" (change)="importKbis($event)" />
             
                <label for="kbis">
                  <svg id="upload-arrow" data-name="upload-big-arrow (1)" xmlns="http://www.w3.org/2000/svg" width="13.409" height="12.026" viewBox="0 0 13.409 12.026">
                    <g id="Groupe_394" data-name="Groupe 394" transform="translate(3.045)">
                      <path id="Tracé_256" data-name="Tracé 256" d="M104.986,27.929h1.357v4.026a.739.739,0,0,0,.739.739H109.1a.739.739,0,0,0,.739-.739V27.929H111.2a.555.555,0,0,0,.392-.948l-3.1-3.105a.556.556,0,0,0-.785,0l-3.1,3.105a.555.555,0,0,0,.392.948Z" transform="translate(-104.431 -23.713)" fill="#1376a3"/>
                    </g>
                    <g id="Groupe_395" data-name="Groupe 395" transform="translate(0 5.724)">
                      <path id="Tracé_257" data-name="Tracé 257" d="M12.742,220.029a.667.667,0,0,0-.666.667v2.788A1.517,1.517,0,0,1,10.561,225H2.848a1.516,1.516,0,0,1-1.515-1.515V220.7A.667.667,0,1,0,0,220.7v2.788a2.851,2.851,0,0,0,2.848,2.848h7.713a2.851,2.851,0,0,0,2.848-2.848V220.7A.667.667,0,0,0,12.742,220.029Z" transform="translate(0 -220.029)" fill="#1376a3"/>
                    </g>
                  </svg>
                Choisir un fichier</label>
            </div>
           
                  
          </div>
          <div  *ngIf="form.kbis" class="col-md-6 file-box">
            <label class="element-label" for="kbis">KBIS</label>
            <div class="d-flex">
              <a class="mlr-10 element" [attr.href]="sanitizer.bypassSecurityTrustResourceUrl(form.kbis)" download="kbis-{{form.nom}}-{{form.prenom}}.pdf" title="kbis-{{form.nom}}-{{form.prenom}}.pdf">kbis-{{form.nom}}-{{form.prenom}}.pdf</a>
              <img (click)="form.kbis=''" src="assets/img/common/trash-bin.svg" style="width: 15px"/>
          
            </div>
            </div>
        </div>
        <div class="row d-flex profil-data gx-4">
          <div class="form-group col-md-6 ">
            <label class="element-label" for="urssaf">URSSAF</label>
            <input
              type="text"
              class="form-control element"
              id="urssaf"
              name="urssaf"
              placeholder="XXXXXXXXXX"
              [(ngModel)]="form.urssaf"
              required
            />
          </div>
        </div>
      </div>
    </div>
    <div class="row mt-4">
      <div class="col-12 ms-lg-0 col-lg-3 col-separator p-lg-0 mb-3 mb-lg-0 center-verticaly">
        <span class="row-title">Spécialisation</span>
      </div>
      <div class="col-lg-9 col-12 pl-40">
        <div class="row profil-data mb-17 gx-4">
          <div class="col-md-6 form-group">
            <label class="element-label">Catégorie</label>
            <angular2-multiselect name="category"
                                  [data]="userCategory"
                                  [(ngModel)]="form.category"
                                  [settings]="settings">
            </angular2-multiselect>
          </div>
          <div class="col-md-6 form-group">
            <label class="element-label">Compétences</label>
            <angular2-multiselect name="competance"
                                  [data]="userCompetences"
                                  [(ngModel)]="form.competance"
                                  [settings]="settings">
            </angular2-multiselect>
          </div>
        </div>
        <div class="row profil-data">
          <div class="col-md-6 form-group gx-4">
            <label class="element-label">Accreditations</label>
            <angular2-multiselect name="accreditations"
                                  
                                  [data]="userAccred"
                                  [(ngModel)]="form.accreditation"
                                  [settings]="settings">
            </angular2-multiselect>
          </div>
        </div>
      </div>
    </div>
    <div class="row mt-4">
      <div class="col-12 ms-lg-0 col-lg-3 mb-3  p-lg-0 col-margin center-verticaly">
        <span class="row-title">Mise à jour du mot de passe</span>
      </div>
      <div class="col-lg-9 col-12 pl-40">
        <div class="row gx-4 profil-data">
          <div class="col-md-6 form-group">
            <label class="element-label">Nouveau mot de passe</label>
            <input type="password" [(ngModel)]="newPassword" id="password" (click)="passwordChanged()"
                   class="form-control element" name="password" #password
            >
          </div>
          <div class="col-md-6 form-group">
            <label class="element-label">Confirmez le nouveau mot de passe</label>
            <input type="password" [(ngModel)]="confirmPassword" (click)="confirmPasswordChanged()"
                   class="form-control element" [required]="password.value.length > 0"
                   pattern="{{ password.value }}"
            >
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-3 col-12 p-0 hidden-md col-margin">
      </div>
      <div class="col-lg-9 col-12 mt-20 pl-40">
        <button class="btn btn-primary align-self-end" (click)="saveUser()">Enregistrer</button>&nbsp;

      </div>
    </div>
  </div>
</div>
