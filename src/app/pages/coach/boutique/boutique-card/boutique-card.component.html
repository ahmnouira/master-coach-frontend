<form
  [@animate]="{
    value: '*',
    params: { duration: '300ms', y: '100px' }
  }"
  name="form"
  #f="ngForm"
  novalidate
>
  <h2 class="title">Info</h2>

  <!-- Titre -->
  <app-text-field [label]="'Titre'" [(model)]="form.title" [form]="f">
  </app-text-field>

  <!-- Description -->
  <app-text-area
    [label]="'Description'"
    [(model)]="form.description"
    [placeholder]="'Texte…'"
    [form]="f"
  >
  </app-text-area>

  <!-- Duration  [required]="false" -->
  <app-text-field
    [label]="'Durée'"
    [(model)]="form.duration"
    [placeholder]="'Min'"
    [type]="'number'"
    [form]="f"
    [min]="30"
  >
  </app-text-field>

  <app-select
    [label]="'Catégory'"
    [data]="categories"
    [text]="'Coaching de carriére'"
    [(model)]="form.category"
  >
  </app-select>

  <app-divider></app-divider>

  <div class="row align-items-center mt-4">
    <div class="col-4">
      <app-titled-field content="type">
        <app-radio
          [label]="'Documents'"
          [(model)]="form.type"
          [value]="'document'"
        >
        </app-radio>
      </app-titled-field>
    </div>

    <div class="col">
      <app-file-uploader
        [model]="form.files"
        [title]="getMultiFileFieldData().title"
        type="getMultiFileFieldData().type"
        [style]="'secondary'"
        (onClick)="addFiles($event)"
        (onDelete)="form.files = ''"
      ></app-file-uploader>
    </div>
  </div>

  <div class="row align-items-center">
    <div class="col-4">
      <app-titled-field [content]="'type'" [titleHidden]="true">
        <app-radio [label]="'Vidéos'" [(model)]="form.type" [value]="'video'">
        </app-radio>
      </app-titled-field>
    </div>
  </div>

  <div class="row align-items-center">
    <div class="col-4">
      <app-titled-field [content]="'type'" [titleHidden]="true">
        <app-radio
          [label]="'Podcasts'"
          [(model)]="form.type"
          [value]="'podcast'"
        >
        </app-radio>
      </app-titled-field>
    </div>
  </div>

  <div class="row align-items-center mt-4 mb-4">
    <app-titled-field content="image">
      <app-file-uploader
        [model]="form.image"
        [title]="'Ajouter une photo'"
        type="photo"
        [style]="'secondary'"
        [showLabel]="false"
        [label]="'Photo qui illustre votre produit'"
        (onClick)="importImage($event)"
        (onDelete)="form.image = ''"
      ></app-file-uploader>
    </app-titled-field>
  </div>

  <!-- Divider -->
  <app-divider></app-divider>
  <h2 class="title">Tarifs</h2>

  <label class="label" for="gratuit">Prix TTC</label>

  <div class="row align-items-center">
    <div class="col-3">
      <app-checkbox
        [label]="'Gratuit'"
        [(model)]="form.isFree"
        (modelChange)="handleFree($event)"
      >
      </app-checkbox>
    </div>

    <div class="col-9">
      <app-text-field
        [(model)]="form.price"
        [type]="'number'"
        [label]="'Price'"
        [placeholder]="'Price'"
        [showLabel]="false"
        [form]="f"
        [required]="!form.isFree"
        [disabled]="form.isFree"
        [min]="1"
        pattern="[0-9]+"
      >
      </app-text-field>
    </div>
  </div>

  <app-divider></app-divider>
  <app-form-error [error]="error"></app-form-error>

  <div class="alert alert-info" role="alert" *ngIf="success">
    Service ajouté
  </div>

  <app-button (onClick)="submit()" [isLoading]="isSubmitting"> </app-button>
</form>
