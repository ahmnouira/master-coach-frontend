<app-sub-header [title]="'Ajouter un support de formation'"></app-sub-header>

<div class="sub-component-content">
  <div class="row mt-4 gx-4">
    <div class="col">
      <div class="row">
        <div class="col-2"></div>
        <div class="col-10 right-side">
          <form
            [@animate]="{
              value: '*',
              params: { duration: '300ms', y: '100px' }
            }"
            name="form"
            #f="ngForm"
            novalidate
          >
            <h2 class="title">Info</h2>

            <!-- Titre -->
            <app-text-field [label]="'Titre'" [(model)]="form.title">
            </app-text-field>

            <!-- Description -->
            <app-text-area
              [label]="'Description'"
              [(model)]="form.description"
              [placeholder]="'Texte…'"
            >
            </app-text-area>

            <!-- Duration  [required]="false" -->
            <app-text-field
              [label]="'Durée'"
              [(model)]="form.duration"
              [placeholder]="'Min'"
              [type]="'number'"
            >
            </app-text-field>

            <div class="row align-items-center mt-4">
              <div class="col-4">
                <app-titled-field title="type">
                  <app-checkbox [label]="'Documents'" [(model)]="isDocument">
                  </app-checkbox>
                </app-titled-field>
              </div>

              <div class="col">
                <app-file-uploader
                  [name]="'document'"
                  (onClick)="addPhoto($event)"
                ></app-file-uploader>
              </div>
            </div>

            <div class="row align-items-center">
              <div class="col-4">
                <app-titled-field [title]="'type'" [titleHidden]="true">
                  <app-checkbox [label]="'Vidéos'" [(model)]="isVideo">
                  </app-checkbox>
                </app-titled-field>
              </div>
            </div>

            <div class="row align-items-center mt-4 mb-4">
              <app-titled-field title="image">
                <app-file-uploader
                  [name]="'document'"
                  (onClick)="addPhoto($event)"
                ></app-file-uploader>
              </app-titled-field>
            </div>

            <!-- Divider -->
            <app-divider></app-divider>
            <h2 class="title">Tarifs</h2>

            <label class="label" for="gratuit">Prix</label>

            <div class="row align-items-center">
              <div class="col-3">
                <app-checkbox [label]="'Gratuit'" [(model)]="form.isFree">
                </app-checkbox>
              </div>

              <div class="col-9">
                <app-text-field
                  [(model)]="form.price"
                  [type]="'number'"
                  [label]="'Price'"
                  [placeholder]="'Price'"
                  [showLabel]="false"
                >
                </app-text-field>
              </div>
            </div>

            <div class="form-group mt-4">
              <label class="element-label">Catégory</label>
              <angular2-multiselect
                name="category"
                [data]="categories"
                [(ngModel)]="form.category"
                [settings]="settings"
              >
              </angular2-multiselect>
            </div>

            <app-divider></app-divider>

            <div class="form-group">
              <div class="alert alert-danger" role="alert" *ngIf="error">
                {{ error }}
              </div>
            </div>

            <div class="d-flex justify-content-end">
              <button
                type="submit"
                class="btn btn-primary submit-btn"
                (click)="submit()"
                [disabled]="isLoading"
              >
                <span *ngIf="!isLoading">Enregistrer</span>
                <app-loader *ngIf="isLoading"></app-loader>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="col">
      <app-right-image page="add-formation"></app-right-image>
    </div>
  </div>
</div>
