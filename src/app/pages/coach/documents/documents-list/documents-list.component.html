<app-sub-header [title]="'Mes documents'"></app-sub-header>

<div class="sub-component-content">
  <div class="row mt-4 gx-4">
    <div class="col-9">
      <div class="filters-row input-group form-group form-inline d-flex">
        <select
          class="selectFilter mlr-10"
          [(ngModel)]="selectedStatus"
          (change)="onOptionsSelected($event, 'status')"
        >
          <option selected disabled value="status">Achat / Réservation</option>
          <option value="En attente">En attente</option>
          <option value="Clos">Clos</option>
        </select>
        <select
          class="selectFilter mlr-10"
          [(ngModel)]="selectedType"
          (change)="onOptionsSelected($event, 'type')"
        >
          <option selected disabled value="type">Coachée</option>
          <option value="quiz">Quiz</option>
          <option value="support">Support de formation</option>
        </select>
        <div
          class="filters-row input-group form-group form-inline"
          style="width: 250px"
        >
          <input
            class="form-control searchBox mlr-10"
            type="text"
            [(ngModel)]="filterString"
            placeholder="Titre"
          />
          <span
            class="material-icons material-icons-inside-input"
            style="right: 30px; color: #1376a3"
            >search</span
          >
        </div>
        <button class="btn mlr-10">Rechercher</button>
      </div>
    </div>

    <div class="col-3 d-flex flex-column">
      <div class="d-inline-flex justify-content-end">
        &nbsp;
        <a routerLink="/pages/coach/boutique/add" class="btn align-self-end"
          ><span class="material-icons">add_circle</span>Ajouter un document</a
        >&nbsp;
      </div>
    </div>
  </div>

  <div *ngIf="isLoading; else elseBlock">
    <app-loader [marginTop]="'64px'"></app-loader>
  </div>
  <ng-template #elseBlock>
    <app-empty-page title="documents" *ngIf="!found && !error"></app-empty-page>

    <app-form-error [error]="error"></app-form-error>

    <div
      *ngIf="found"
      class="boutique"
      [@animate]="{
        value: '*',
        params: { duration: '300ms', y: '100px' }
      }"
    >
      <div class="row" *ngIf="found">
        <div class="table-responsive">
          <loading-card [loading]="loadingAnimation">
            <datatable
              [datatable]="documents"
              (datatableChange)="datatableChange($event)"
              [checkboxes]="true"
              [Actions]="ACTION_COLUMNS"
              (onActionClicked)="onActionClicked($event)"
              [searchvalue]="filterString"
              [displayedColomn]="DISPLAYED_COLUMNS"
            ></datatable>
          </loading-card>
        </div>
      </div>
    </div>
  </ng-template>
</div>
